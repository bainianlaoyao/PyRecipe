"""
简单的Markdown菜谱生成测试
"""

import sys
import os

sys.path.insert(0, os.path.dirname(os.path.abspath(__file__)))

from 菜谱框架 import *


# 定义一些简单的菜谱
@定义菜谱("番茄炒蛋")
def 番茄炒蛋(菜: 菜谱构建器):
    """番茄炒蛋"""
    番茄 = 菜.切(菜.取食材("番茄", 个(2)), "块")
    鸡蛋 = 菜.取食材("鸡蛋", 个(3))
    葱 = 菜.切(菜.取食材("葱", 根(1)), "段")
    盐 = 菜.取食材("盐", 克(3))

    # 将打散和炒合并，更自然
    炒蛋 = 菜.炒([鸡蛋], 时间_秒=30, 描述="炒", 名称="炒鸡蛋", 用油=10)
    炒番茄 = 菜.炒([番茄], 时间_秒=20, 描述="炒", 名称="炒番茄", 用油=5)
    混合 = 菜.混合([炒蛋, 炒番茄], "翻炒均匀", "混合好的")
    最终 = 菜.调味([混合], ["葱", "盐"], "加入盐和葱花")

    return 最终


@定义菜谱("清蒸鱼")
def 清蒸鱼(菜: 菜谱构建器):
    """清蒸鱼"""
    鱼 = 菜.取食材("鱼", 克(500))
    姜 = 菜.切(菜.取食材("姜", 克(10)), "片")
    葱 = 菜.切(菜.取食材("葱", 根(2)), "段")
    生抽 = 菜.取食材("生抽", 毫升(10))
    香油 = 菜.取食材("香油", 毫升(5))

    腌制 = 菜.自定义([鱼, 姜, 葱], "腌制10分钟", "腌制好的鱼")
    蒸制 = 菜.自定义([腌制], "蒸8分钟", "蒸好的鱼")
    淋调料 = 菜.自定义([蒸制, 生抽, 香油], "淋在鱼身上", "清蒸鱼")

    return 淋调料


if __name__ == "__main__":
    print("=" * 60)
    print("Markdown菜谱生成测试")
    print("=" * 60)

    # 1. 预览单个菜谱
    print("\n1. 预览 '番茄炒蛋' 菜谱:")
    print("-" * 60)
    预览菜谱("番茄炒蛋")

    # 2. 生成单个文件
    print("\n2. 生成 '清蒸鱼' 菜谱文件:")
    print("-" * 60)
    生成菜谱文档(
        "清蒸鱼",
        输出文件="输出菜谱/清蒸鱼.md",
        包含统计=True
    )

    # 3. 生成所有菜谱
    print("\n3. 生成所有菜谱到文件:")
    print("-" * 60)
    生成所有菜谱(
        输出目录="输出菜谱",
        单文件=False  # 每个菜谱单独文件
    )

    print("\n" + "=" * 60)
    print("完成！菜谱已保存到 '输出菜谱' 目录")
    print("=" * 60)
